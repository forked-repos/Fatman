<% include layouts/header.ejs %>

<body>

<% include layouts/menu.ejs %>

<!-- *****************************************************************************************************************
 BLUE WRAP
 ***************************************************************************************************************** -->
<div id="blue">
    <div class="container">
		<div class="row">
			<h3>POST.</h3>
		</div><!-- /row -->
    </div> <!-- /container -->
</div><!-- /blue -->

<div class="container mtb" ng-app="postApp" ng-controller="FormController as form">
    <% if ( errors != '' ) {%>
    <div class="alert alert-danger" role="alert">
      <ul>
        <% for (var key in errors[0]) { %>
        <li> <%= errors[0][key].msg %> </li>
        <% } %>
        <ul>
    </div>
    <% } %>

    <% if (message != '') {%>
    <div class="alert alert-warning" role="alert">
      <%= message[0] %>
    </div>
    <% } %>

    <form class="form-horizontal" method="POST" action="/post" enctype="multipart/form-data">
      <input type="hidden" name="_csrf" value="<%= csrfToken %>">
      <div class="form-group">
        <label class="control-label col-sm-2"> Category: </label>
        <div class='col-sm-10'>
          <select name="category" class="form-control" ng-change="form.changeCateg()" ng-model="form.selectedCateg" ng-options="categ.type | uppercase for categ in form.categories track by categ._id">
          </select>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2"> Sub Category: </label>
        <div class='col-sm-10'>
          <select name="subCategory" class="form-control" ng-options="subCateg.type | uppercase for subCateg in form.subCategories track by subCateg._id" ng-model="form.selectedSubCateg">
          </select>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2"> Title: </label>
        <div class="col-sm-10">
          <input name="title" type="text" class="form-control" id="title" placeholder="Title" <% if (oldInput != '') { %> value="<%= oldInput[0].title %>" <% } %>>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2"> Condition: </label>
        <div class="col-sm-10">
          <input name="condition" type="text" class="form-control" id="title" placeholder="Condition" <% if (oldInput != '') { %> value="<%= oldInput[0].condition %>" <% } %> ng-model="form.input.condition">
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2"> Photos: </label>
        <div class="col-sm-10">
          <input name='photos' type='file' multiple="multiple"/>
          <p class="help-block">Add up to 12 photos.</p>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2"> Details: </label>
        <div class="col-sm-10">
          <textarea name="details" class="form-control" rows="3"></textarea>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2"> Price: </label>
        <div class="col-sm-3">
          <div class="input-group">
            <div class="input-group-addon">$</div>
            <input name="price" type="text" class="form-control" id="exampleInputAmount" placeholder="Amount">
            <div class="input-group-addon">.00</div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2"> Location: </label>
        <div class="col-sm-3">
          <select class="form-control" name="location">
            <option value="0">City</option>
            <% for (var i = 0; i < locations.length; i++) { %>
            	<% if (locations[i].city === 'phnom penh') { %>
            		<option value="<%= locations[i]._id %>" selected="selected"> <%= locations[i].city.toUpperCase() %> </option>
            	<% } else { %>
            		<option value="<%= locations[i]._id %>"> <%= locations[i].city.toUpperCase() %> </option>
            	<% } %>
            <% } %>
          </select>
        </div>
      </div>
      <button type="submit" class="btn btn-primary btn-lg pull-right">Post It</button>
    </form>
</div>

<% include layouts/footer.ejs %>